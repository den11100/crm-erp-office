# üìò ERP API: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ñ–∏—Å–∞–º–∏

> –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ñ–∏—Å–∞–º–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ –º–æ–¥—É–ª—å `erp.collection_point`.

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–í—Å–µ –º–µ—Ç–æ–¥—ã —Ç—Ä–µ–±—É—é—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫:

X-Api-Key: {your_api_key}

–ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º API-–∫–ª—é—á–µ:
```json
{
  "status": "fail",
  "error": "Bad API key",
  "code": 2
}
```

## üì• –ü–æ–ª—É—á–∏—Ç—å –æ—Ñ–∏—Å –ø–æ `erp_medoffice_id`

–ú–µ—Ç–æ–¥: GET /api/erp/office/{erp_medoffice_id}

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:

GET /api/erp/office/1  
X-Api-Key: your_api_key

–û—Ç–≤–µ—Ç 200:
```json
{
  "status": "success",
  "data": {
    "id": 1,
    "erp_medoffice_id": 1,
    "name": "–ú–û –ú–æ—Å–∫–≤–∞",
    "city": "–ú–æ—Å–∫–≤–∞",
    "address": "–ú–æ—Å–∫–≤–∞, —É–ª. –ù–∞–∑–≤–∞–Ω–∏–µ–£–ª–∏—Ü—ã, –¥–æ–º 20",
    "phones": "–¥–æ–±. 4017,4023",
    "is_deleted": 0
  }
}
```
–û—à–∏–±–∫–∞ 404:
```json
{
  "status": "fail",
  "error": "–û—Ñ–∏—Å –Ω–µ –Ω–∞–π–¥–µ–Ω",
  "code": 8
}
```
## ‚ûï –°–æ–∑–¥–∞—Ç—å –æ—Ñ–∏—Å

–ú–µ—Ç–æ–¥: POST /api/erp/office  
Content-Type: application/json

–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:

erp_medoffice_id (int, –æ–±—è–∑.) ‚Äî –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –æ—Ñ–∏—Å–∞ –≤ ERP  
name (string, –æ–±—è–∑.) ‚Äî –ù–∞–∑–≤–∞–Ω–∏–µ  
city (string, –æ–±—è–∑.) ‚Äî –ì–æ—Ä–æ–¥  
address (string, –æ–±—è–∑.) ‚Äî –ê–¥—Ä–µ—Å  
phones (string, –æ–±—è–∑.) ‚Äî –¢–µ–ª–µ—Ñ–æ–Ω—ã —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é

–ü—Ä–∏–º–µ—Ä:
```json
{
  "erp_medoffice_id": 1,
  "name": "–ú–û –ú–æ—Å–∫–≤–∞",
  "city": "–ú–æ—Å–∫–≤–∞",
  "address": "–ú–æ—Å–∫–≤–∞, —É–ª. –ù–∞–∑–≤–∞–Ω–∏–µ–£–ª–∏—Ü—ã, –¥–æ–º 20",
  "phones": "–¥–æ–±. 4017,4023"
}
```
–û—Ç–≤–µ—Ç 200: (–∫–∞–∫ GET)

–û—à–∏–±–∫–∞ ‚Äî –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
```json
{
  "status": "fail",
  "error": "–ù–µ –ø–µ—Ä–µ–¥–∞–Ω—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã: name, city",
  "code": 10
}
```
–û—à–∏–±–∫–∞ ‚Äî –æ—Ñ–∏—Å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:
```json
{
  "status": "fail",
  "error": "–û—Ñ–∏—Å —Å —Ç–∞–∫–∏–º erp_medoffice_id —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç",
  "code": 11
}
```
–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏:
```json
{
  "status": "fail",
  "error": "–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏: name cannot be blank",
  "code": 12
}
```
## üîÑ –û–±–Ω–æ–≤–∏—Ç—å –æ—Ñ–∏—Å

–ú–µ—Ç–æ–¥: PUT /api/erp/office/{erp_medoffice_id}  
Content-Type: application/json

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:
```json
{
  "name": "–ú–û –ú–æ—Å–∫–≤–∞",
  "city": "–ú–æ—Å–∫–≤–∞",
  "address": "–ú–æ—Å–∫–≤–∞, —É–ª. –ù–∞–∑–≤–∞–Ω–∏–µ–£–ª–∏—Ü—ã, –¥–æ–º 20",
  "phones": "–¥–æ–±. 4017,4023"
}
```
–û—Ç–≤–µ—Ç 200: (–∫–∞–∫ GET)

–û—à–∏–±–∫–∞ 404:
```json
{
  "status": "fail",
  "error": "–û—Ñ–∏—Å –Ω–µ –Ω–∞–π–¥–µ–Ω",
  "code": 8
}
```
–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏:
```json
{
  "status": "fail",
  "error": "–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏: name is too long",
  "code": 12
}
```
## üö´ –ò–∑–º–µ–Ω–∏—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –æ—Ñ–∏—Å–∞

–ú–µ—Ç–æ–¥: PUT /api/erp/office/{erp_medoffice_id}/change-active  
Content-Type: application/json

–ü—Ä–∏–º–µ—Ä:
```json
{
  "is_deleted": 1
}
```
–û—Ç–≤–µ—Ç 200: (–∫–∞–∫ GET, —Ç–æ–ª—å–∫–æ `is_deleted` –∏–∑–º–µ–Ω—ë–Ω)

–û—à–∏–±–∫–∞ ‚Äî –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω is_deleted:
```json
{
  "status": "fail",
  "error": "–ù–µ –ø–µ—Ä–µ–¥–∞–Ω –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä is_deleted",
  "code": 10
}
```
–û—à–∏–±–∫–∞ 404:
```json
{
  "status": "fail",
  "error": "–û—Ñ–∏—Å –Ω–µ –Ω–∞–π–¥–µ–Ω",
  "code": 8
}
```
## üß± –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–±—ä–µ–∫—Ç–∞ –æ—Ñ–∏—Å–∞

id (int) ‚Äî –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π ID  
erp_medoffice_id (int) ‚Äî –í–Ω–µ—à–Ω–∏–π ID ERP  
name (string) ‚Äî –ù–∞–∑–≤–∞–Ω–∏–µ  
city (string) ‚Äî –ì–æ—Ä–æ–¥  
address (string) ‚Äî –ê–¥—Ä–µ—Å  
phones (string) ‚Äî –¢–µ–ª–µ—Ñ–æ–Ω—ã (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)  
is_deleted (int) ‚Äî 0 ‚Äî –∞–∫—Ç–∏–≤–µ–Ω, 1 ‚Äî —É–¥–∞–ª—ë–Ω

## üßæ –ö–æ–¥—ã –æ—à–∏–±–æ–∫ API

–û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∫–æ–¥–æ–≤ –æ—à–∏–±–æ–∫, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –≤ –ø–æ–ª–µ `code` –ø—Ä–∏ —Å—Ç–∞—Ç—É—Å–µ `"fail"`:

| –ö–æ–¥ | –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞              | –û–ø–∏—Å–∞–Ω–∏–µ                                                          |
|-----|-------------------------|-------------------------------------------------------------------|
| 2   | `CODE_BAD_API`          | –ù–µ–≤–µ—Ä–Ω—ã–π API-–∫–ª—é—á. –ö–ª–∏–µ–Ω—Ç –Ω–µ –ø—Ä–æ—à—ë–ª –ø—Ä–æ–≤–µ—Ä–∫—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.        |
| 8   | `CODE_NOT_FOUND`        | –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–π –æ–±—ä–µ–∫—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ñ–∏—Å) –Ω–µ –Ω–∞–π–¥–µ–Ω.                 |
| 9   | `CODE_INVALID_FORMAT`   | –û—à–∏–±–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON. |
| 10  | `CODE_REQUIRED_PARAM`   | –ù–µ –ø–µ—Ä–µ–¥–∞–Ω—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞.                      |
| 11  | `CODE_ALREADY_EXIST`    | –û–±—ä–µ–∫—Ç —Å —Ç–∞–∫–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, ID –æ—Ñ–∏—Å–∞).    |
| 12  | `CODE_VALIDATION`       | –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –º–æ–¥–µ–ª–∏ ‚Äî –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∏–ª–∏ –ø—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.     |

